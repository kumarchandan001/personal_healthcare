<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Personal Health Assistant{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    {% block additional_styles %}{% endblock %}
  </head>
  <body>
    <!-- Header Section -->
    <header>
      <div class="header-container">
        <div class="logo-container">
          <a href="{{ url_for('home') }}" class="logo-link" title="Go to Dashboard">
            <img src="{{ url_for('static', filename='images/logo1.jpg') }}" alt="Health Assistant Logo" width="60" height="60">
          </a>
          <div class="header-text">
            <h1>AI Based Personal Health Assistant</h1>
            <p>Your health, tracked and managed in one place.</p>
          </div>
        </div>
        <div class="auth-buttons">
          {% if current_user.is_authenticated %}
            <div class="user-profile">
              <div class="user-avatar" title="{{ current_user.username }}">
                {{ current_user.username[0].upper() }}
              </div>
              <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
            </div>
          {% else %}
            <div class="auth-links">
              <a href="{{ url_for('login') }}" class="login-btn">Login</a>
              <a href="{{ url_for('signup') }}" class="signup-btn">Sign Up</a>
            </div>
          {% endif %}
        </div>
      </div>
    </header>

    <!-- Navigation Menu -->
    <nav>
      <ul>
        <li><a href="{{ url_for('home') }}">Home</a></li>
        <li><a href="{{ url_for('disease_prediction') }}">Disease Prediction</a></li>
        <li><a href="{{ url_for('health_advice') }}">Health Advice</a></li>
        <li><a href="{{ url_for('health_monitor') }}">Health Monitoring</a></li>
        <li><a href="{{ url_for('activity') }}">Activity Tracking</a></li>
        <li><a href="{{ url_for('medication_reminder') }}">Medication Reminders</a></li>
        <li><a href="{{ url_for('bmi') }}">BMI Calculator</a></li>
        <li><a href="{{ url_for('medical_prescription') }}">Medical Prescription</a></li>
        <li><a href="{{ url_for('record_management') }}">Records</a></li>
        <li><a href="{{ url_for('emergency') }}">Emergency</a></li>
        <li><a href="{{ url_for('tips') }}">Health Tips</a></li>
      </ul>
    </nav>

    <main>
      {% block content %}{% endblock %}
    </main>

    <!-- Chatbot Toggler -->
    <button id="chatbot-toggler" aria-label="Toggle Chatbot">
      <i class="fas fa-comment" style="font-size: 24px; color: white;"></i>
    </button>

    <!-- Chatbot Popup -->
    <div class="chatbot-popup" role="dialog" aria-modal="true" aria-label="Chatbot Window">
      <!-- Chatbot Header -->
      <div class="chat-header">
        <div class="header-info">
          <svg class="chatbot-logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
            <path
              d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"
            />
          </svg>
          <h2 class="logo-text">Healthbot</h2>
        </div>
        <button id="close-chatbot" aria-label="Close Chatbot">
          <i class="fas fa-times" style="font-size: 18px; color: white;"></i>
        </button>
      </div>

      <!-- Chatbot Body -->
      <div class="chat-body" tabindex="0">
        <div class="message bot-message">
          <svg class="bot-avatar" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
            <path
              d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"
            />
          </svg>
          <div class="message-text">
            Hey there!<br />How can I help you with your health goals today?
          </div>
        </div>
      </div>

      <!-- Emoji Picker Container -->
      <div class="emoji-picker-container">
        <!-- Emoji picker will be inserted here by JavaScript -->
        <div class="emoji-placeholder">Loading emojis...</div>
      </div>

      <!-- Chatbot Footer -->
      <div class="chat-footer">
        <form action="#" class="chat-form">
          <div class="input-area">
            <textarea placeholder="Type your health question here..." class="message-input" required aria-label="Type your message here"></textarea>
          </div>
          <div class="chat-controls">
            <button type="button" id="emoji-picker" class="control-btn" aria-label="Emoji Picker">
              <i class="far fa-smile"></i>
            </button>
            <div class="file-upload-wrapper">
              <input type="file" accept="image/*" id="file-input" hidden />
              <img src="#" alt="File preview" />
              <button type="button" id="file-upload" class="control-btn" aria-label="Upload File">
                <i class="fas fa-paperclip"></i>
              </button>
              <button type="button" id="file-cancel" class="control-btn" aria-label="Cancel File Upload">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <button type="submit" id="send-message" class="send-btn" aria-label="Send Message">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Common scripts -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    {% block additional_scripts %}{% endblock %}
  </body>
</html> 